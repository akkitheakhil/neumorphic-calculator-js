export default class Calculator{constructor(t,s){this.historyDisplay=t,this.resultDisplay=s,this.history=[]}clear(){this.clearOutputDisplay(),this.clearHistory()}clearOutputDisplay(){this.resultDisplay.innerHTML=""}clearHistory(){this.history=[],this.historyDisplay.innerHTML=""}addValueToHistory(t){this.history.push({type:"number",value:t})}addOperatorToHistory(t){this.history.push({type:"operator",value:t}),this.setHistoryDisplayData()}setHistoryDisplayData(){const t=this.history.map((t=>t.value)).join(" ");this.clearOutputDisplay(),this.historyDisplay.innerHTML=t}handleNumberButton(t){this.resultDisplay.innerHTML+=t}handleOperatorButton(t){const s=this.resultDisplay.innerHTML,r=this.history.length;if(""!==s||r)return"operator"===this.history[r-1]?.type?(this.history[r-1].value=t,void this.setHistoryDisplayData()):(this.addValueToHistory(s),void this.addOperatorToHistory(t))}handleResult(){const t=this.resultDisplay.innerHTML;this.addValueToHistory(t);let s=0,r="";this.history.forEach((t=>{"number"===t.type?s=this.calculate(s,t.value,r):r=t.value})),this.resultDisplay.innerHTML=this.formatResult(s),this.clearHistory()}calculate(t,s,r){if(0===t&&""!==s&&""===r)return s;switch(r){case"+":return this.parseNumber(t)+this.parseNumber(s);case"-":return this.parseNumber(t)-this.parseNumber(s);case"/":return this.parseNumber(t)/this.parseNumber(s);case"*":return this.parseNumber(t)*this.parseNumber(s);case"%":return this.parseNumber(t)/100*this.parseNumber(s);default:return t}}handleBackspace(){const t=this.resultDisplay.innerHTML;""!=t&&(this.resultDisplay.innerHTML=t.substr(0,t.length-1))}parseNumber(t){return Number(parseFloat(t))||0}formatResult(t){return t%1!=0?t.toFixed(2):t}}